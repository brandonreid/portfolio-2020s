{"version":3,"sources":["webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./src/pages/protected-portfolio.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","Login","useState","password","setPassword","logIn","Auth","signIn","console","message","type","onChange","e","target","onClick","ProtectedPortfolio","props","user","setUser","useEffect","updateUser","currentAuthenticatedUser","Hub","listen","remove","logOut","signOut","Layout","title"],"mappings":"4FAAA,SAASA,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAOC,GAEP,YADAP,EAAOO,GAILF,EAAKG,KACPT,EAAQO,GAERG,QAAQV,QAAQO,GAAOI,KAAKT,EAAOC,GAIxB,SAASS,EAAkBC,GACxC,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIP,QAAQ,SAAUV,EAASC,GACpC,IAAIF,EAAMc,EAAGK,MAAMJ,EAAME,GAEzB,SAASd,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOgB,GACdrB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASgB,GAGnEjB,OAAMkB,M,oEC1BNC,EAAQ,WACZ,IADkB,EAEcC,mBAAS,IAAlCC,EAFW,KAEDC,EAFC,KAIZC,EAAK,mBAAG,YACZ,UACQC,IAAKC,OALE,QAKeJ,GAC5B,MAAOf,GACPoB,QAAQpB,MAAMA,EAAMqB,YAJb,qDAQX,OACE,6BACE,2CACA,2BACEC,KAAK,WACLvB,MAAOgB,EACPQ,SAAU,SAACC,GACTR,EAAYQ,EAAEC,OAAO1B,UAGzB,4BAAQuB,KAAK,SAASI,QAAS,WAC7BT,MADF,YA+CSU,UAxCY,SAACC,GAAW,IAAD,EACZd,mBAAS,MAA1Be,EAD6B,KACvBC,EADuB,KAGpCC,oBAAU,WACR,IAAMC,EAAU,mBAAG,YACjB,IACE,IAAMH,QAAaX,IAAKe,2BACxBH,EAAQD,GACR,SACAC,EAAQ,SALI,qDAWhB,OAFAI,IAAIC,OAAO,OAAQH,GACnBA,IACO,kBAAME,IAAIE,OAAO,OAAQJ,KAC/B,CAACH,EAAMC,IAEV,IAAMO,EAAM,mBAAG,YACb,UACQnB,IAAKoB,UACX,MAAOtC,GACPoB,QAAQpB,MAAMA,MAJN,qDAQZ,OACE,kBAACuC,EAAA,EAAD,iBAAYX,EAAZ,CAAmBY,MAAM,YACrBX,EACA,oCACE,8CACA,4BAAQH,QAAS,WACfW,MADF,WAHK,kBAAC,EAAD","file":"component---src-pages-protected-portfolio-js-6b2ea892316308751642.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import React, { useState, useEffect } from 'react';\nimport { Auth, Hub } from 'aws-amplify';\n\nimport Layout from '../components/Layout';\n\nconst Login = () => {\n  const username = 'guest';\n  const [password, setPassword] = useState('');\n\n  const logIn = async () => {\n    try {\n      await Auth.signIn(username, password);\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n\n  return (\n    <div>\n      <label>Password</label>\n      <input\n        type=\"password\"\n        value={password}\n        onChange={(e) => {\n          setPassword(e.target.value);\n        }}\n      />\n      <button type=\"submit\" onClick={() => {\n        logIn();\n      }}>Submit</button>\n    </div>\n  );\n};\n\nconst ProtectedPortfolio = (props) => {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const updateUser = async () => {\n      try {\n        const user = await Auth.currentAuthenticatedUser();\n        setUser(user);\n      } catch {\n        setUser(null);\n      }\n    };\n\n    Hub.listen('auth', updateUser); // listen for login/signup events\n    updateUser(); // check manually the first time because we won't get a Hub event\n    return () => Hub.remove('auth', updateUser); // cleanup\n  }, [user, setUser]);\n\n  const logOut = async () => {\n    try {\n      await Auth.signOut();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <Layout {...props} title=\"My Work\">\n      {!user ? <Login /> : (\n        <>\n          <h1>View Portfolio</h1>\n          <button onClick={() => {\n            logOut();\n          }}>Logout</button>\n        </>\n      )}\n    </Layout>\n  );\n};\n\nexport default ProtectedPortfolio;\n"],"sourceRoot":""}